<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>30-Day LeetCode Progress Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .auth-section {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .auth-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .auth-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .user-info {
            color: white;
            font-size: 0.9em;
        }

        .loading {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 1000;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #3498db;
        }

        .stat-label {
            color: #666;
            margin-top: 10px;
            font-weight: 500;
        }

        .progress-section {
            padding: 30px;
        }

        .week-section {
            margin-bottom: 40px;
            background: #f8f9fa;
            border-radius: 15px;
            overflow: hidden;
        }

        .week-header {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 20px;
            font-size: 1.3em;
            font-weight: bold;
        }

        .day-grid {
            display: grid;
            gap: 15px;
            padding: 20px;
        }

        .day-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #3498db;
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .day-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
        }

        .day-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .status-pending {
            background: #f39c12;
            color: white;
        }

        .status-completed {
            background: #27ae60;
            color: white;
        }

        .status-skipped {
            background: #e74c3c;
            color: white;
        }

        .problems-list {
            display: grid;
            gap: 10px;
        }

        .problem-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .problem-item:hover {
            background: #e9ecef;
        }

        .problem-checkbox {
            margin-right: 12px;
            transform: scale(1.2);
            cursor: pointer;
        }

        .problem-name {
            flex: 1;
            font-weight: 500;
        }

        .problem-difficulty {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .difficulty-easy {
            background: #d4edda;
            color: #155724;
        }

        .difficulty-medium {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty-hard {
            background: #f8d7da;
            color: #721c24;
        }

        .pattern-tag {
            display: inline-block;
            background: #007bff;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75em;
            margin-left: 8px;
        }

        .notes-section {
            margin-top: 15px;
        }

        .notes-textarea {
            width: 100%;
            min-height: 60px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            resize: vertical;
            font-family: inherit;
        }

        .contest-section {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            margin: 20px;
            padding: 25px;
            border-radius: 15px;
        }

        .contest-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .contest-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .export-section {
            padding: 30px;
            text-align: center;
            background: #f8f9fa;
        }

        .export-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }

        .export-btn:hover {
            transform: translateY(-2px);
        }

        .sync-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #27ae60;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sync-status.show {
            opacity: 1;
        }

        .sync-status.error {
            background: #e74c3c;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header h1 {
                font-size: 2em;
            }

            .auth-section {
                position: static;
                justify-content: center;
                margin-top: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <div>üîÑ Syncing with Firebase...</div>
    </div>

    <div class="sync-status" id="syncStatus">
        ‚úÖ Data synced successfully
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="auth-section">
                <div class="user-info" id="userInfo" style="display: none;"></div>
                <button class="auth-btn" id="signInBtn" onclick="signInWithGoogle()">üîê Sign In</button>
                <button class="auth-btn" id="signOutBtn" onclick="signOutUser()" style="display: none;">üö™ Sign Out</button>
            </div>
            <h1>üöÄ 30-Day LeetCode Mastery</h1>
            <p>Track your progress, build patterns, boost your profile!</p>
        </div>

        <!-- Stats Dashboard -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="completedProblems">0</div>
                <div class="stat-label">Problems Solved</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="currentStreak">0</div>
                <div class="stat-label">Day Streak</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="contestsJoined">0</div>
                <div class="stat-label">Contests Joined</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="patternsLearned">0</div>
                <div class="stat-label">Patterns Mastered</div>
            </div>
        </div>

        <!-- Contest Tracking -->
        <div class="contest-section">
            <h2>üìä Contest Performance Tracker</h2>
            <div class="contest-grid">
                <div class="contest-card">
                    <h3>Weekly Contest #420</h3>
                    <p><strong>Date:</strong> <input type="date" style="background: transparent; border: 1px solid white; color: white; padding: 5px; border-radius: 5px;" onchange="saveContestData()"></p>
                    <p><strong>Problems Solved:</strong> <input type="number" min="0" max="4" style="width: 60px; background: transparent; border: 1px solid white; color: white; text-align: center; padding: 5px; border-radius: 5px;" onchange="saveContestData()"> / 4</p>
                    <p><strong>Rank:</strong> <input type="number" style="width: 80px; background: transparent; border: 1px solid white; color: white; text-align: center; padding: 5px; border-radius: 5px;" onchange="saveContestData()"></p>
                </div>
                <div class="contest-card">
                    <h3>Biweekly Contest #145</h3>
                    <p><strong>Date:</strong> <input type="date" style="background: transparent; border: 1px solid white; color: white; padding: 5px; border-radius: 5px;" onchange="saveContestData()"></p>
                    <p><strong>Problems Solved:</strong> <input type="number" min="0" max="4" style="width: 60px; background: transparent; border: 1px solid white; color: white; text-align: center; padding: 5px; border-radius: 5px;" onchange="saveContestData()"> / 4</p>
                    <p><strong>Rank:</strong> <input type="number" style="width: 80px; background: transparent; border: 1px solid white; color: white; text-align: center; padding: 5px; border-radius: 5px;" onchange="saveContestData()"></p>
                </div>
            </div>
        </div>

        <!-- Progress Tracking -->
        <div class="progress-section">
            <div class="week-section">
                <div class="week-header">Week 3: Trees, Binary Search & Heaps</div>
                <div style="padding: 20px; text-align: center; color: #666;">
                    <p>üìÖ Days 15-21: Binary Trees, BSTs, Binary Search, Heaps, Tries</p>
                    <p><em>This section will auto-populate as you progress through the weeks</em></p>
                </div>
            </div>

            <div class="week-section">
                <div class="week-header">Week 4: Graphs, Dynamic Programming & Advanced Patterns</div>
                <div style="padding: 20px; text-align: center; color: #666;">
                    <p>üìÖ Days 22-30: Graph Algorithms, DP, Backtracking, Mock Interviews</p>
                    <p><em>Final week focuses on FAANG-level problems and interview simulation</em></p>
                </div>
            </div>
        </div>

        <!-- Export Section -->
        <div class="export-section">
            <h2>üìä Export Your Progress</h2>
            <button class="export-btn" onclick="exportProgress()">üìã Export as Text</button>
            <button class="export-btn" onclick="generateReport()">üìà Generate Report</button>
            <button class="export-btn" onclick="syncToFirebase()">‚òÅÔ∏è Sync to Cloud</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, doc, setDoc, getDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBUxosEm2PoOjr6cabBHgopew3w81dbjAk",
            authDomain: "leetcode-tracker-c79ce.firebaseapp.com",
            projectId: "leetcode-tracker-c79ce",
            storageBucket: "leetcode-tracker-c79ce.firebasestorage.app",
            messagingSenderId: "36537045265",
            appId: "1:36537045265:web:4b308443700e6a2c603cb0",
            measurementId: "G-28FJGKLD69"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const analytics = getAnalytics(app);
        const provider = new GoogleAuthProvider();

        // Global variables
        window.auth = auth;
        window.db = db;
        window.currentUser = null;
        window.unsubscribe = null;

        // Auth state observer
        onAuthStateChanged(auth, (user) => {
            if (user) {
                window.currentUser = user;
                document.getElementById('signInBtn').style.display = 'none';
                document.getElementById('signOutBtn').style.display = 'inline-block';
                document.getElementById('userInfo').style.display = 'inline-block';
                document.getElementById('userInfo').textContent = `üëã ${user.displayName || user.email}`;
                
                // Load user data from Firestore
                loadFirebaseData();
                
                // Set up real-time listener
                setupRealtimeListener();
            } else {
                window.currentUser = null;
                document.getElementById('signInBtn').style.display = 'inline-block';
                document.getElementById('signOutBtn').style.display = 'none';
                document.getElementById('userInfo').style.display = 'none';
                
                // Clean up listener
                if (window.unsubscribe) {
                    window.unsubscribe();
                    window.unsubscribe = null;
                }
                
                // Load local data as fallback
                loadLocalData();
            }
        });

        // Google Sign In
        window.signInWithGoogle = async () => {
            try {
                showLoading(true);
                const result = await signInWithPopup(auth, provider);
                showSyncStatus('üéâ Successfully signed in!', 'success');
            } catch (error) {
                console.error('Sign in error:', error);
                showSyncStatus('‚ùå Sign in failed', 'error');
            } finally {
                showLoading(false);
            }
        };

        // Sign Out
        window.signOutUser = async () => {
            try {
                await signOut(auth);
                showSyncStatus('üëã Successfully signed out', 'success');
                // Clear local data
                localStorage.removeItem('leetcodeProgress');
                location.reload();
            } catch (error) {
                console.error('Sign out error:', error);
                showSyncStatus('‚ùå Sign out failed', 'error');
            }
        };

        // Load data from Firebase
        async function loadFirebaseData() {
            if (!window.currentUser) return;
            
            try {
                showLoading(true);
                const docRef = doc(db, 'users', window.currentUser.uid);
                const docSnap = await getDoc(docRef);
                
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    applyDataToUI(data);
                    showSyncStatus('‚úÖ Data loaded from cloud', 'success');
                } else {
                    console.log('No cloud data found, using local data');
                    loadLocalData();
                }
            } catch (error) {
                console.error('Error loading from Firebase:', error);
                showSyncStatus('‚ö†Ô∏è Cloud sync failed, using local data', 'error');
                loadLocalData();
            } finally {
                showLoading(false);
            }
        }

        // Setup real-time listener
        function setupRealtimeListener() {
            if (!window.currentUser) return;
            
            const docRef = doc(db, 'users', window.currentUser.uid);
            window.unsubscribe = onSnapshot(docRef, (doc) => {
                if (doc.exists()) {
                    const data = doc.data();
                    // Only update if data is different (to avoid infinite loops)
                    if (JSON.stringify(data) !== JSON.stringify(getCurrentData())) {
                        applyDataToUI(data);
                        showSyncStatus('üîÑ Data synced', 'success');
                    }
                }
            });
        }

        // Save to Firebase
        window.saveToFirebase = async (data = null) => {
            if (!window.currentUser) {
                saveToLocal();
                return;
            }
            
            try {
                const dataToSave = data || getCurrentData();
                const docRef = doc(db, 'users', window.currentUser.uid);
                await setDoc(docRef, {
                    ...dataToSave,
                    lastUpdated: new Date().toISOString()
                }, { merge: true });
                
                // Also save locally as backup
                saveToLocal(dataToSave);
                
            } catch (error) {
                console.error('Error saving to Firebase:', error);
                showSyncStatus('‚ö†Ô∏è Cloud sync failed', 'error');
                // Fallback to local storage
                saveToLocal();
            }
        };

        // Manual sync function
        window.syncToFirebase = async () => {
            if (!window.currentUser) {
                alert('Please sign in to sync to cloud!');
                return;
            }
            
            showLoading(true);
            await window.saveToFirebase();
            showLoading(false);
            showSyncStatus('‚òÅÔ∏è Synced to cloud!', 'success');
        };
    </script>

    <script>
        // Progress tracking variables
        let completedProblems = 0;
        let currentStreak = 0;
        let contestsJoined = 0;
        let patternsLearned = new Set();
        let saveTimeout = null;

        // Initialize app
        window.onload = function() {
            // Auth state will handle data loading
            updateStats();
            setupEventListeners();
        };

        // Setup event listeners
        function setupEventListeners() {
            // Problem checkboxes
            const checkboxes = document.querySelectorAll('.problem-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const problemItem = this.closest('.problem-item');
                    const patternTag = problemItem.querySelector('.pattern-tag');
                    
                    if (this.checked) {
                        completedProblems++;
                        problemItem.style.opacity = '0.7';
                        problemItem.style.textDecoration = 'line-through';
                        
                        if (patternTag) {
                            patternsLearned.add(patternTag.textContent);
                        }
                    } else {
                        completedProblems--;
                        problemItem.style.opacity = '1';
                        problemItem.style.textDecoration = 'none';
                    }
                    
                    updateStats();
                    debouncedSave();
                });
            });

            // Notes textareas
            const textareas = document.querySelectorAll('.notes-textarea');
            textareas.forEach(textarea => {
                textarea.addEventListener('input', debouncedSave);
            });
        }

        // Debounced save function
        function debouncedSave() {
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(() => {
                if (window.saveToFirebase) {
                    window.saveToFirebase();
                } else {
                    saveToLocal();
                }
            }, 1000);
        }

        // Toggle day status
        function toggleDayStatus(element) {
            const statuses = ['status-pending', 'status-completed', 'status-skipped'];
            const statusTexts = ['Pending', 'Completed', 'Skipped'];
            
            let currentIndex = 0;
            statuses.forEach((status, index) => {
                if (element.classList.contains(status)) {
                    currentIndex = index;
                }
            });
            
            element.classList.remove(statuses[currentIndex]);
            const nextIndex = (currentIndex + 1) % statuses.length;
            element.classList.add(statuses[nextIndex]);
            element.textContent = statusTexts[nextIndex];
            
            updateStreak();
            debouncedSave();
        }

        // Update statistics
        function updateStats() {
            document.getElementById('completedProblems').textContent = completedProblems;
            document.getElementById('currentStreak').textContent = currentStreak;
            document.getElementById('contestsJoined').textContent = contestsJoined;
            document.getElementById('patternsLearned').textContent = patternsLearned.size;
        }

        // Update streak calculation
        function updateStreak() {
            const completedDays = document.querySelectorAll('.status-completed').length;
            currentStreak = completedDays;
            updateStats();
        }

        // Get current data state
        function getCurrentData() {
            const data = {
                completedProblems,
                currentStreak,
                contestsJoined,
                patternsLearned: Array.from(patternsLearned),
                dayStatuses: {},
                problemStates: {},
                notes: {},
                contests: {}
            };
            
            // Save day statuses and notes
            document.querySelectorAll('.day-card').forEach((card, index) => {
                const status = card.querySelector('.day-status').textContent;
                const notes = card.querySelector('.notes-textarea').value;
                data.dayStatuses[index] = status;
                data.notes[index] = notes;
            });
            
            // Save problem states
            document.querySelectorAll('.problem-checkbox').forEach((checkbox, index) => {
                data.problemStates[index] = checkbox.checked;
            });

            // Save contest data
            const contestInputs = document.querySelectorAll('.contest-card input');
            contestInputs.forEach((input, index) => {
                data.contests[index] = input.value;
            });
            
            return data;
        }

        // Apply data to UI
        function applyDataToUI(data) {
            if (!data) return;
            
            completedProblems = data.completedProblems || 0;
            currentStreak = data.currentStreak || 0;
            contestsJoined = data.contestsJoined || 0;
            patternsLearned = new Set(data.patternsLearned || []);
            
            // Restore day statuses and notes
            if (data.dayStatuses) {
                Object.keys(data.dayStatuses).forEach(index => {
                    const dayCard = document.querySelectorAll('.day-card')[index];
                    if (dayCard) {
                        const statusElement = dayCard.querySelector('.day-status');
                        const status = data.dayStatuses[index];
                        
                        statusElement.classList.remove('status-pending', 'status-completed', 'status-skipped');
                        
                        if (status === 'Completed') {
                            statusElement.classList.add('status-completed');
                        } else if (status === 'Skipped') {
                            statusElement.classList.add('status-skipped');
                        } else {
                            statusElement.classList.add('status-pending');
                        }
                        statusElement.textContent = status;
                    }
                });
            }
            
            // Restore notes
            if (data.notes) {
                Object.keys(data.notes).forEach(index => {
                    const dayCard = document.querySelectorAll('.day-card')[index];
                    if (dayCard) {
                        const textarea = dayCard.querySelector('.notes-textarea');
                        if (textarea) textarea.value = data.notes[index] || '';
                    }
                });
            }
            
            // Restore problem states
            if (data.problemStates) {
                Object.keys(data.problemStates).forEach(index => {
                    const checkbox = document.querySelectorAll('.problem-checkbox')[index];
                    if (checkbox) {
                        checkbox.checked = data.problemStates[index];
                        const problemItem = checkbox.closest('.problem-item');
                        if (checkbox.checked) {
                            problemItem.style.opacity = '0.7';
                            problemItem.style.textDecoration = 'line-through';
                        }
                    }
                });
            }

            // Restore contest data
            if (data.contests) {
                const contestInputs = document.querySelectorAll('.contest-card input');
                Object.keys(data.contests).forEach(index => {
                    const input = contestInputs[index];
                    if (input) input.value = data.contests[index] || '';
                });
            }
            
            updateStats();
        }

        // Save to local storage (fallback)
        function saveToLocal(data = null) {
            const dataToSave = data || getCurrentData();
            localStorage.setItem('leetcodeProgress', JSON.stringify(dataToSave));
        }

        // Load from local storage
        function loadLocalData() {
            const savedData = localStorage.getItem('leetcodeProgress');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    applyDataToUI(data);
                } catch (error) {
                    console.error('Error loading local data:', error);
                }
            }
        }

        // Contest data save
        function saveContestData() {
            debouncedSave();
        }

        // Export progress
        function exportProgress() {
            let report = "üöÄ 30-Day LeetCode Progress Report\n";
            report += "=====================================\n\n";
            report += `üìä Statistics:\n`;
            report += `‚Ä¢ Problems Solved: ${completedProblems}\n`;
            report += `‚Ä¢ Current Streak: ${currentStreak} days\n`;
            report += `‚Ä¢ Contests Joined: ${contestsJoined}\n`;
            report += `‚Ä¢ Patterns Learned: ${patternsLearned.size}\n\n`;
            
            report += "üìö Patterns Mastered:\n";
            patternsLearned.forEach(pattern => {
                report += `‚Ä¢ ${pattern}\n`;
            });
            
            report += "\nüìù Daily Progress:\n";
            const dayCards = document.querySelectorAll('.day-card');
            dayCards.forEach((card, index) => {
                const dayTitle = card.querySelector('.day-title').textContent;
                const status = card.querySelector('.day-status').textContent;
                const notes = card.querySelector('.notes-textarea').value;
                
                report += `Day ${index + 1}: ${dayTitle} - ${status}\n`;
                if (notes.trim()) {
                    report += `Notes: ${notes}\n`;
                }
                report += "\n";
            });
            
            const blob = new Blob([report], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'leetcode-progress-report.txt';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        // Generate progress report
        function generateReport() {
            const report = {
                date: new Date().toISOString().split('T')[0],
                stats: {
                    completedProblems,
                    currentStreak,
                    contestsJoined,
                    patternsLearned: Array.from(patternsLearned)
                },
                completionRate: ((completedProblems / 100) * 100).toFixed(1) + '%'
            };
            
            alert(`üìà Progress Report (${report.date}):\n\n` +
                  `‚úÖ Completion Rate: ${report.completionRate}\n` +
                  `üìö Problems Solved: ${completedProblems}/100\n` +
                  `üî• Current Streak: ${currentStreak} days\n` +
                  `üèÜ Contests: ${contestsJoined}\n` +
                  `üß† Patterns: ${patternsLearned.size}/15`);
        }

        // Utility functions
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        function showSyncStatus(message, type = 'success') {
            const statusEl = document.getElementById('syncStatus');
            statusEl.textContent = message;
            statusEl.className = `sync-status ${type} show`;
            
            setTimeout(() => {
                statusEl.classList.remove('show');
            }, 3000);
        }

        // Auto-save every 30 seconds
        setInterval(() => {
            if (window.saveToFirebase) {
                window.saveToFirebase();
            } else {
                saveToLocal();
            }
        }, 30000);
    </script>
</body>
</html>">Week 1: Foundation Patterns (Arrays, Hashing, Two Pointers)</div>
                <div class="day-grid">
                    <div class="day-card" data-day="1">
                        <div class="day-header">
                            <div class="day-title">Day 1: Array Fundamentals</div>
                            <div class="day-status status-pending" onclick="toggleDayStatus(this)">Pending</div>
                        </div>
                        <div class="problems-list">
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[1] Two Sum</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">HashMap</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[217] Contains Duplicate</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">HashSet</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[53] Maximum Subarray</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">Kadane's</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <textarea class="notes-textarea" placeholder="Notes: Key patterns learned, difficulties faced, insights..." onchange="debouncedSave()"></textarea>
                        </div>
                    </div>

                    <div class="day-card" data-day="2">
                        <div class="day-header">
                            <div class="day-title">Day 2: Hashing Mastery</div>
                            <div class="day-status status-pending" onclick="toggleDayStatus(this)">Pending</div>
                        </div>
                        <div class="problems-list">
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[242] Valid Anagram</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">Frequency</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[49] Group Anagrams</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Grouping</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[347] Top K Frequent Elements</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Bucket Sort</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <textarea class="notes-textarea" placeholder="Notes: Key patterns learned, difficulties faced, insights..." onchange="debouncedSave()"></textarea>
                        </div>
                    </div>

                    <div class="day-card" data-day="3">
                        <div class="day-header">
                            <div class="day-title">Day 3: Two Pointers Introduction</div>
                            <div class="day-status status-pending" onclick="toggleDayStatus(this)">Pending</div>
                        </div>
                        <div class="problems-list">
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[125] Valid Palindrome</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">Two Pointers</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[167] Two Sum II</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">Two Pointers</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[15] 3Sum</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Two Pointers</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <textarea class="notes-textarea" placeholder="Notes: Key patterns learned, difficulties faced, insights..." onchange="debouncedSave()"></textarea>
                        </div>
                    </div>

                    <div class="day-card" data-day="4">
                        <div class="day-header">
                            <div class="day-title">Day 4: Advanced Array Techniques</div>
                            <div class="day-status status-pending" onclick="toggleDayStatus(this)">Pending</div>
                        </div>
                        <div class="problems-list">
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[238] Product of Array Except Self</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Prefix/Suffix</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[121] Best Time to Buy and Sell Stock</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">One Pass</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[122] Best Time to Buy and Sell Stock II</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Greedy</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <textarea class="notes-textarea" placeholder="Notes: Key patterns learned, difficulties faced, insights..." onchange="debouncedSave()"></textarea>
                        </div>
                    </div>

                    <div class="day-card" data-day="5">
                        <div class="day-header">
                            <div class="day-title">Day 5: Sliding Window</div>
                            <div class="day-status status-pending" onclick="toggleDayStatus(this)">Pending</div>
                        </div>
                        <div class="problems-list">
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[3] Longest Substring Without Repeating Characters</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Sliding Window</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[424] Longest Repeating Character Replacement</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Sliding Window</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[567] Permutation in String</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Sliding Window</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <textarea class="notes-textarea" placeholder="Notes: Key patterns learned, difficulties faced, insights..." onchange="debouncedSave()"></textarea>
                        </div>
                    </div>

                    <div class="day-card" data-day="6">
                        <div class="day-header">
                            <div class="day-title">Day 6: Hard Array Problems</div>
                            <div class="day-status status-pending" onclick="toggleDayStatus(this)">Pending</div>
                        </div>
                        <div class="problems-list">
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[128] Longest Consecutive Sequence</span>
                                <span class="problem-difficulty difficulty-hard">Hard</span>
                                <span class="pattern-tag">Union-Find</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[560] Subarray Sum Equals K</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Prefix Sum</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[76] Minimum Window Substring</span>
                                <span class="problem-difficulty difficulty-hard">Hard</span>
                                <span class="pattern-tag">Sliding Window</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <textarea class="notes-textarea" placeholder="Notes: Key patterns learned, difficulties faced, insights..." onchange="debouncedSave()"></textarea>
                        </div>
                    </div>

                    <div class="day-card" data-day="7">
                        <div class="day-header">
                            <div class="day-title">Day 7: Contest + Review</div>
                            <div class="day-status status-pending" onclick="toggleDayStatus(this)">Pending</div>
                        </div>
                        <div class="problems-list">
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">Weekly Contest Participation</span>
                                <span class="problem-difficulty difficulty-medium">Contest</span>
                                <span class="pattern-tag">Profile Boost</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">Review 2 problems from this week</span>
                                <span class="problem-difficulty difficulty-easy">Review</span>
                                <span class="pattern-tag">Reinforcement</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">Document patterns learned</span>
                                <span class="problem-difficulty difficulty-easy">Documentation</span>
                                <span class="pattern-tag">Knowledge</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <textarea class="notes-textarea" placeholder="Notes: Contest performance, patterns mastered, areas to improve..." onchange="debouncedSave()"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Week 2 -->
            <div class="week-section">
                <div class="week-header">Week 2: Linear Data Structures (Linked Lists, Stacks, Queues)</div>
                <div class="day-grid">
                    <div class="day-card" data-day="8">
                        <div class="day-header">
                            <div class="day-title">Day 8: Linked List Basics</div>
                            <div class="day-status status-pending" onclick="toggleDayStatus(this)">Pending</div>
                        </div>
                        <div class="problems-list">
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[206] Reverse Linked List</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">Linked List</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[21] Merge Two Sorted Lists</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">Merge</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[141] Linked List Cycle</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">Two Pointers</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <textarea class="notes-textarea" placeholder="Notes: Key patterns learned, difficulties faced, insights..." onchange="debouncedSave()"></textarea>
                        </div>
                    </div>

                    <div class="day-card" data-day="9">
                        <div class="day-header">
                            <div class="day-title">Day 9: Advanced Linked Lists</div>
                            <div class="day-status status-pending" onclick="toggleDayStatus(this)">Pending</div>
                        </div>
                        <div class="problems-list">
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[19] Remove Nth Node From End</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Two Pointers</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[143] Reorder List</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Linked List</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[2] Add Two Numbers</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Math</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <textarea class="notes-textarea" placeholder="Notes: Key patterns learned, difficulties faced, insights..." onchange="debouncedSave()"></textarea>
                        </div>
                    </div>

                    <div class="day-card" data-day="10">
                        <div class="day-header">
                            <div class="day-title">Day 10: Stack Fundamentals</div>
                            <div class="day-status status-pending" onclick="toggleDayStatus(this)">Pending</div>
                        </div>
                        <div class="problems-list">
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[20] Valid Parentheses</span>
                                <span class="problem-difficulty difficulty-easy">Easy</span>
                                <span class="pattern-tag">Stack</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[155] Min Stack</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Design</span>
                            </div>
                            <div class="problem-item">
                                <input type="checkbox" class="problem-checkbox">
                                <span class="problem-name">[739] Daily Temperatures</span>
                                <span class="problem-difficulty difficulty-medium">Medium</span>
                                <span class="pattern-tag">Monotonic Stack</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <textarea class="notes-textarea" placeholder="Notes: Key patterns learned, difficulties faced, insights..." onchange="debouncedSave()"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Week 3 & 4 Preview Cards -->
            <div class="week-section">
                <div class="week-header
